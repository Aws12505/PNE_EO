import{u as M,r as l,a as L,j as e,L as j}from"./app-7ALy2TZn.js";import{P as q}from"./page-shell-hFvpc_d-.js";import{B}from"./badge-B-S8P2y4.js";import{B as c}from"./index-C90piOTk.js";import{L as p,I as R}from"./label-BCWZfmEe.js";import{S as f,a as v,b as S,c as y,d as i}from"./select-D1L3nghx.js";import{T as D,a as F,b as N,c as n,d as $,e as t}from"./table-Ddbn337c.js";import{d as G}from"./index-ClYWWAsG.js";import{e as d}from"./app-layout-D6BCVOOh.js";/* empty css            */import"./utils-DvRnx1Xn.js";import"./index-CTXFst1r.js";import"./index-wKhStEsh.js";import"./app-logo-icon-BEMH4fRw.js";const a="all";function le(){const{employees:o,statuses:V,tags:P,stores:k,filters:r}=M().props,z=[{title:"Dashboard",href:G().url},{title:"Employees",href:d.index().url}],[m,b]=l.useState(r.search??""),[h,_]=l.useState(r.status_id?String(r.status_id):a),[u,T]=l.useState(r.tag_id?String(r.tag_id):a),[x,C]=l.useState(r.store_id?String(r.store_id):a),I=l.useMemo(()=>{const s={};return m.trim()&&(s.search=m.trim()),h!==a&&(s.status_id=h),u!==a&&(s.tag_id=u),x!==a&&(s.store_id=x),s},[m,h,u,x]);l.useEffect(()=>{const s=setTimeout(()=>{L.get(d.index().url,I,{preserveState:!0,preserveScroll:!0,replace:!0})},250);return()=>clearTimeout(s)},[I]);const H=()=>{b(""),_(a),T(a),C(a),L.get(d.index().url,{},{preserveState:!0,replace:!0})};return e.jsxs(q,{title:"Employees",breadcrumbs:z,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Employees"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",o.total]})]}),e.jsx(c,{asChild:!0,children:e.jsx(j,{href:d.create().url,children:"Create Employee"})})]}),e.jsxs("div",{className:"mt-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Search"}),e.jsx(R,{value:m,onChange:s=>b(s.target.value),placeholder:"Name / preferred name…"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Status"}),e.jsxs(f,{value:h,onValueChange:_,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any status"})}),e.jsxs(y,{children:[e.jsx(i,{value:a,children:"Any"}),V.map(s=>e.jsx(i,{value:String(s.id),children:s.value},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Tag"}),e.jsxs(f,{value:u,onValueChange:T,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any tag"})}),e.jsxs(y,{children:[e.jsx(i,{value:a,children:"Any"}),P.map(s=>e.jsx(i,{value:String(s.id),children:s.tag_name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-3",children:[e.jsx(p,{children:"Store"}),e.jsxs(f,{value:x,onValueChange:C,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any store"})}),e.jsxs(y,{children:[e.jsx(i,{value:a,children:"Any"}),k.map(s=>e.jsxs(i,{value:String(s.id),children:[s.name," (#",s.manual_id,")"]},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsx(c,{variant:"outline",type:"button",onClick:H,children:"Clear"})})]}),e.jsx("div",{className:"mt-4 rounded-lg border",children:e.jsxs(D,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Preferred"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Employment"}),e.jsx(n,{children:"Tags"}),e.jsx(n,{className:"w-[1%] text-right",children:"Actions"})]})}),e.jsxs($,{children:[o.data.map(s=>{const g=[s.first_name,s.middle_name,s.last_name].filter(Boolean).join(" "),E=s.employment?.store?.name??null,A=s.employment?.store?.manual_id??null;return e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:g}),e.jsx(t,{children:s.preferred_name??"—"}),e.jsx(t,{children:s.status?.value?e.jsx(B,{variant:"secondary",children:s.status.value}):"—"}),e.jsx(t,{children:E?e.jsxs("span",{className:"text-sm",children:[E,A?` • #${A}`:""]}):"—"}),e.jsx(t,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(s.tags??[]).length?(s.tags??[]).map(w=>e.jsx(B,{variant:"outline",children:w.tag_name},w.id)):"—"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(j,{href:d.show(s).url,children:"View"})}),e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(j,{href:d.edit(s).url,children:"Edit"})})]})})]},s.id)}),o.data.length===0&&e.jsx(N,{children:e.jsx(t,{colSpan:6,className:"py-10 text-center text-sm text-muted-foreground",children:"No employees found."})})]})]})}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:o.links.map((s,g)=>e.jsx(c,{variant:s.active?"default":"outline",size:"sm",asChild:!0,disabled:!s.url,children:e.jsx(j,{href:s.url??"#",preserveScroll:!0,preserveState:!0,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})})},g))})]})}export{le as default};
