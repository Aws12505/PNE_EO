import{c as ue,u as pe,r as C,j as e,F as he,L as je}from"./app-CJCnJmun.js";import{I as i}from"./input-error-CJF_ROAW.js";import{P as xe}from"./page-shell-BLnaUPhK.js";import{B as b}from"./index-DX3wi2HJ.js";import{L as d,I as c}from"./label-BiHLPWHl.js";import{S as X,a as Y,b as Z,c as ee,d as W}from"./select-5ewwJ4GE.js";import{T as ye}from"./textarea-Dr2GmNH2.js";import{d as ge}from"./index-yKHhYTah.js";import{e as H}from"./app-layout-BikHnB6D.js";/* empty css            */import"./utils-DvRnx1Xn.js";import"./index-C5kUj-74.js";import"./index-Wafgvjq0.js";import"./check-Ds1Ojrua.js";import"./app-logo-icon-D_7fXl7i.js";const se=s=>{if(!s)return"";const n=s.match(/^(\d{4}-\d{2}-\d{2})/);return n?n[1]:""};function He(){const s=ue.c(43),{employee:n,statuses:O,tags:z,stores:J}=pe().props,[$,te]=C.useState(String(n.employee_status_id??"")),[V,ae]=C.useState(n.employment?.store_id?String(n.employment.store_id):"");let x;s[0]!==n.contacts?(x=n.contacts?.length?n.contacts:[{contact_type:"email",contact_value:"",is_primary:!0}],s[0]=n.contacts,s[1]=x):x=s[1];let I;s[2]!==x?(I=x.map(Ve),s[2]=x,s[3]=I):I=s[3];const[K,S]=C.useState(I);let y;s[4]!==n.addresses?(y=n.addresses?.length?n.addresses:[{address_type:"home",address_line1:"",address_line2:"",city:"",state:"",country:"",postal_code:""}],s[4]=n.addresses,s[5]=y):y=s[5];let E;s[6]!==y?(E=y.map($e),s[6]=y,s[7]=E):E=s[7];const[Q,j]=C.useState(E);let g;s[8]!==n.tags?(g=n.tags??[],s[8]=n.tags,s[9]=g):g=s[9];let k;s[10]!==g?(k=g.map(Ce),s[10]=g,s[11]=k):k=s[11];const ne=k,[w,re]=C.useState(ne);let F;s[12]===Symbol.for("react.memo_cache_sentinel")?(F={title:"Dashboard",href:ge().url},s[12]=F):F=s[12];let T;s[13]===Symbol.for("react.memo_cache_sentinel")?(T={title:"Employees",href:H.index().url},s[13]=T):T=s[13];let f;s[14]!==n?(f=H.edit(n),s[14]=n,s[15]=f):f=s[15];let A;s[16]!==f.url?(A=[F,T,{title:"Edit",href:f.url}],s[16]=f.url,s[17]=A):A=s[17];const U=A;let P;s[18]===Symbol.for("react.memo_cache_sentinel")?(P=p=>{re(h=>h.includes(p)?h.filter(a=>a!==p):[...h,p])},s[18]=P):P=s[18];const ie=P;let L;s[19]===Symbol.for("react.memo_cache_sentinel")?(L=p=>{S(h=>h.map((a,r)=>({...a,is_primary:r===p})))},s[19]=L):L=s[19];const le=L;let D;s[20]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{S(Se)},s[20]=D):D=s[20];const de=D;let R;s[21]===Symbol.for("react.memo_cache_sentinel")?(R=p=>{S(h=>{const a=h.filter((r,t)=>t!==p);return a.length&&!a.some(be)&&(a[0].is_primary=!0),a.length?a:[{contact_type:"email",contact_value:"",is_primary:!0}]})},s[21]=R):R=s[21];const ce=R;let B;s[22]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{j(Ne)},s[22]=B):B=s[22];const me=B;let q;s[23]===Symbol.for("react.memo_cache_sentinel")?(q=p=>{j(h=>{const a=h.filter((r,t)=>t!==p);return a.length?a:[{address_type:"home",address_line1:"",address_line2:"",city:"",state:"",country:"",postal_code:""}]})},s[23]=q):q=s[23];const oe=q;let M;s[24]===Symbol.for("react.memo_cache_sentinel")?(M=e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold",children:"Edit Employee"})}),s[24]=M):M=s[24];let v;s[25]!==n?(v=H.update.form(n),s[25]=n,s[26]=v):v=s[26];let _;s[27]!==Q||s[28]!==K||s[29]!==n||s[30]!==V||s[31]!==$||s[32]!==O||s[33]!==J||s[34]!==w||s[35]!==z?(_=p=>{const{processing:h,errors:a}=p;return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Basic"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"first_name",children:"First name"}),e.jsx(c,{id:"first_name",name:"first_name",required:!0,defaultValue:n.first_name??""}),e.jsx(i,{message:a.first_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"middle_name",children:"Middle name"}),e.jsx(c,{id:"middle_name",name:"middle_name",defaultValue:n.middle_name??""}),e.jsx(i,{message:a.middle_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"last_name",children:"Last name"}),e.jsx(c,{id:"last_name",name:"last_name",required:!0,defaultValue:n.last_name??""}),e.jsx(i,{message:a.last_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"preferred_name",children:"Preferred name"}),e.jsx(c,{id:"preferred_name",name:"preferred_name",defaultValue:n.preferred_name??""}),e.jsx(i,{message:a.preferred_name})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Status"}),e.jsx("input",{type:"hidden",name:"employee_status_id",value:$}),e.jsxs(X,{value:$,onValueChange:te,children:[e.jsx(Y,{children:e.jsx(Z,{placeholder:"Select status"})}),e.jsx(ee,{children:O.map(_e)})]}),e.jsx(i,{message:a.employee_status_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"about_me",children:"About"}),e.jsx(ye,{id:"about_me",name:"about_me",rows:4,defaultValue:n.about_me??""}),e.jsx(i,{message:a.about_me})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Employment"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(d,{children:"Store"}),e.jsx("input",{type:"hidden",name:"employment[store_id]",value:V}),e.jsxs(X,{value:V||"none",onValueChange:r=>ae(r==="none"?"":r),children:[e.jsx(Y,{children:e.jsx(Z,{placeholder:"Select store"})}),e.jsxs(ee,{children:[e.jsx(W,{value:"none",children:"â€”"}),J.map(ve)]})]}),e.jsx(i,{message:a["employment.store_id"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Hiring date"}),e.jsx(c,{type:"date",name:"employment[hiring_date]",defaultValue:se(n.employment?.hiring_date)}),e.jsx(i,{message:a["employment.hiring_date"]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Demographics"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Date of birth"}),e.jsx(c,{type:"date",name:"demographics[date_of_birth]",defaultValue:se(n.demographics?.date_of_birth)}),e.jsx(i,{message:a["demographics.date_of_birth"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Gender"}),e.jsx(c,{name:"demographics[gender]",defaultValue:n.demographics?.gender??""}),e.jsx(i,{message:a["demographics.gender"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Marital status"}),e.jsx(c,{name:"demographics[marital_status]",defaultValue:n.demographics?.marital_status??""}),e.jsx(i,{message:a["demographics.marital_status"]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{id:"veteran",type:"checkbox",name:"demographics[veteran_status]",value:"1",defaultChecked:!!n.demographics?.veteran_status}),e.jsx(d,{htmlFor:"veteran",children:"Veteran"})]}),e.jsx(i,{message:a["demographics.veteran_status"]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Identifiers"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"SSN"}),e.jsx(c,{name:"identifiers[social_security_number]",defaultValue:n.identifiers?.social_security_number??""}),e.jsx(i,{message:a["identifiers.social_security_number"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"National ID"}),e.jsx(c,{name:"identifiers[national_id_number]",defaultValue:n.identifiers?.national_id_number??""}),e.jsx(i,{message:a["identifiers.national_id_number"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"ITIN"}),e.jsx(c,{name:"identifiers[itin]",defaultValue:n.identifiers?.itin??""}),e.jsx(i,{message:a["identifiers.itin"]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Contacts"}),e.jsx(b,{type:"button",variant:"outline",onClick:de,children:"Add contact"})]}),e.jsx("div",{className:"space-y-4",children:K.map((r,t)=>e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("input",{type:"hidden",name:`contacts[${t}][id]`,value:r.id??""}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Type"}),e.jsxs("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:r.contact_type,onChange:m=>S(o=>o.map((l,u)=>u===t?{...l,contact_type:m.target.value}:l)),children:[e.jsx("option",{value:"email",children:"email"}),e.jsx("option",{value:"phone",children:"phone"}),e.jsx("option",{value:"sms",children:"sms"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsx("input",{type:"hidden",name:`contacts[${t}][contact_type]`,value:r.contact_type}),e.jsx(i,{message:a[`contacts.${t}.contact_type`]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(d,{children:"Value"}),e.jsx(c,{value:r.contact_value,onChange:m=>S(o=>o.map((l,u)=>u===t?{...l,contact_value:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`contacts[${t}][contact_value]`,value:r.contact_value}),e.jsx(i,{message:a[`contacts.${t}.contact_value`]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"radio",name:"__primary_contact",checked:r.is_primary,onChange:()=>le(t)}),"Primary"]}),e.jsx(b,{type:"button",variant:"outline",onClick:()=>ce(t),children:"Remove"})]}),e.jsx("input",{type:"hidden",name:`contacts[${t}][is_primary]`,value:r.is_primary?"1":"0"}),e.jsx(i,{message:a[`contacts.${t}.is_primary`]})]},t))}),e.jsx(i,{message:a.contacts})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Addresses"}),e.jsx(b,{type:"button",variant:"outline",onClick:me,children:"Add address"})]}),e.jsx("div",{className:"space-y-4",children:Q.map((r,t)=>e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("input",{type:"hidden",name:`addresses[${t}][id]`,value:r.id??""}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Type"}),e.jsxs("select",{className:"w-full rounded-md border px-3 py-2 text-sm",value:r.address_type,onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,address_type:m.target.value}:l)),children:[e.jsx("option",{value:"home",children:"home"}),e.jsx("option",{value:"work",children:"work"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsx("input",{type:"hidden",name:`addresses[${t}][address_type]`,value:r.address_type}),e.jsx(i,{message:a[`addresses.${t}.address_type`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Address line 1"}),e.jsx(c,{value:r.address_line1,onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,address_line1:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][address_line1]`,value:r.address_line1}),e.jsx(i,{message:a[`addresses.${t}.address_line1`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Address line 2"}),e.jsx(c,{value:r.address_line2??"",onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,address_line2:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][address_line2]`,value:r.address_line2??""}),e.jsx(i,{message:a[`addresses.${t}.address_line2`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"City"}),e.jsx(c,{value:r.city??"",onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,city:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][city]`,value:r.city??""}),e.jsx(i,{message:a[`addresses.${t}.city`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"State"}),e.jsx(c,{value:r.state??"",onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,state:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][state]`,value:r.state??""}),e.jsx(i,{message:a[`addresses.${t}.state`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Country"}),e.jsx(c,{value:r.country??"",onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,country:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][country]`,value:r.country??""}),e.jsx(i,{message:a[`addresses.${t}.country`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Postal code"}),e.jsx(c,{value:r.postal_code??"",onChange:m=>j(o=>o.map((l,u)=>u===t?{...l,postal_code:m.target.value}:l))}),e.jsx("input",{type:"hidden",name:`addresses[${t}][postal_code]`,value:r.postal_code??""}),e.jsx(i,{message:a[`addresses.${t}.postal_code`]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(b,{type:"button",variant:"outline",onClick:()=>oe(t),children:"Remove"})})]},t))}),e.jsx(i,{message:a.addresses})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Tags"}),w.map(fe),e.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:z.map(r=>{const t=w.includes(r.id);return e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:()=>ie(r.id)}),r.tag_name]},r.id)})}),e.jsx(i,{message:a.tag_ids})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{type:"submit",disabled:h,children:"Save"}),e.jsx(b,{variant:"outline",asChild:!0,type:"button",children:e.jsx(je,{href:H.show(n).url,children:"Cancel"})})]})]})},s[27]=Q,s[28]=K,s[29]=n,s[30]=V,s[31]=$,s[32]=O,s[33]=J,s[34]=w,s[35]=z,s[36]=_):_=s[36];let N;s[37]!==v||s[38]!==_?(N=e.jsx(he,{...v,className:"mt-6 max-w-3xl space-y-8",children:_}),s[37]=v,s[38]=_,s[39]=N):N=s[39];let G;return s[40]!==U||s[41]!==N?(G=e.jsxs(xe,{title:"Edit Employee",breadcrumbs:U,children:[M,N]}),s[40]=U,s[41]=N,s[42]=G):G=s[42],G}function fe(s){return e.jsx("input",{type:"hidden",name:"tag_ids[]",value:String(s)},s)}function ve(s){return e.jsxs(W,{value:String(s.id),children:[s.name," (#",s.manual_id,")"]},s.id)}function _e(s){return e.jsx(W,{value:String(s.id),children:s.value},s.id)}function Ne(s){return[...s,{address_type:"home",address_line1:"",address_line2:"",city:"",state:"",country:"",postal_code:""}]}function be(s){return s.is_primary}function Se(s){return[...s,{contact_type:"phone",contact_value:"",is_primary:!1}]}function Ce(s){return s.id}function $e(s){return{id:s.id,address_type:s.address_type??"home",address_line1:s.address_line1??"",address_line2:s.address_line2??"",city:s.city??"",state:s.state??"",country:s.country??"",postal_code:s.postal_code??""}}function Ve(s){return{id:s.id,contact_type:s.contact_type??"email",contact_value:s.contact_value??"",is_primary:!!s.is_primary}}export{He as default};
